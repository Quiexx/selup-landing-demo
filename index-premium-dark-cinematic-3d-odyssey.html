<!DOCTYPE html>

<html class="dark" lang="ru"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>SelUP — сервис привлечения клиентов для селлеров</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "background-light": "#f6f8f6",
                        "background-dark": "#05040a",
                        "brand-navy": "#0d1b12",
                        "brand-muted": "#4c9a66",
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                },
            },
        }
    </script>
<script type="importmap">
	{
		"imports": {
			"three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js",
			"three/addons/": "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/"
		}
	}
</script>
<style>
        body { font-family: 'Manrope', sans-serif; }
        h1, h2 { font-family: 'Unbounded', 'Manrope', sans-serif; letter-spacing: -0.02em; }
        .material-symbols-outlined { font-size: 24px; vertical-align: middle; }

        :root {
            --lp-scroll: 0;
            --lp-scroll-n: 0;
            --lp-story: 0;
            --lp-scene-progress: 0;
            --lp-vh: 0;
            --lp-accent-a: 22 255 140;
            --lp-accent-b: 130 200 255;
        }

        body.lp-odyssey {
            background: #05040a;
            overflow-x: clip;
        }

        body.lp-odyssey::before {
            content: "";
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
            background:
                radial-gradient(900px 520px at 15% 12%, rgba(19, 236, 91, 0.14), transparent 62%),
                radial-gradient(900px 620px at 85% 18%, rgba(120, 180, 255, 0.14), transparent 62%),
                radial-gradient(1100px 720px at 50% 100%, rgba(255, 90, 140, 0.10), transparent 62%);
            opacity: 1;
        }

        body.lp-odyssey::after {
            content: "";
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
            background-image:
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180' viewBox='0 0 180 180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
            background-size: 520px 520px;
            mix-blend-mode: overlay;
            opacity: 0.22;
        }

        main, header, footer { position: relative; z-index: 2; }

        .lp-stage {
            position: fixed;
            inset: 0;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .lp-stage-canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            display: block;
            opacity: 0;
            transition: opacity 320ms ease;
        }

        .lp-stage-fallback {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            opacity: 0.55;
            transition: opacity 320ms ease;
            filter: blur(0px);
        }

        .lp-stage-vignette {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(800px 520px at 50% 40%, rgba(255, 255, 255, 0.06), transparent 62%),
                radial-gradient(1400px 900px at 50% 110%, rgba(0, 0, 0, 0.85), transparent 55%),
                radial-gradient(1200px 900px at 0% 0%, rgba(0, 0, 0, 0.65), transparent 55%),
                radial-gradient(1200px 900px at 100% 0%, rgba(0, 0, 0, 0.65), transparent 55%);
            opacity: 1;
        }

        body.lp-webgl-ready .lp-stage-canvas { opacity: 1; }
        body.lp-webgl-ready .lp-stage-fallback { opacity: 0.10; }

        body.lp-odyssey header.lp-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(5, 4, 10, 0.55) !important;
            border-bottom-color: rgba(255, 255, 255, 0.08) !important;
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
        }

        body.lp-odyssey .lp-chapter {
            min-height: 100svh;
            display: grid;
            align-items: center;
            padding: clamp(84px, 14vh, 140px) 0 clamp(56px, 12vh, 120px);
            background: transparent !important;
        }

        body.lp-odyssey main { padding-top: 72px; }

        body.lp-odyssey .lp-panel {
            position: relative;
            border-radius: 26px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.10);
            box-shadow:
                0 30px 120px rgba(0, 0, 0, 0.55),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            overflow: hidden;
        }

        body.lp-odyssey .lp-panel::before {
            content: "";
            position: absolute;
            inset: -2px;
            pointer-events: none;
            background:
                radial-gradient(900px 520px at 18% 16%, rgba(var(--lp-accent-a) / 0.18), transparent 62%),
                radial-gradient(900px 620px at 82% 22%, rgba(var(--lp-accent-b) / 0.16), transparent 62%),
                radial-gradient(900px 620px at 50% 120%, rgba(255, 255, 255, 0.06), transparent 55%);
            opacity: 0.9;
            mix-blend-mode: screen;
        }

        body.lp-odyssey .lp-surface {
            background: rgba(255, 255, 255, 0.06) !important;
            border: 1px solid rgba(255, 255, 255, 0.10) !important;
            box-shadow:
                0 26px 90px rgba(0, 0, 0, 0.45),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
        }

        body.lp-odyssey .lp-lift {
            transition: transform 240ms cubic-bezier(.2,.8,.2,1), box-shadow 240ms ease, border-color 240ms ease;
            will-change: transform;
        }

        body.lp-odyssey .lp-lift:hover {
            transform: translateY(-6px);
            border-color: rgba(19, 236, 91, 0.28) !important;
            box-shadow:
                0 40px 140px rgba(0, 0, 0, 0.62),
                0 0 0 1px rgba(19, 236, 91, 0.18),
                inset 0 1px 0 rgba(255, 255, 255, 0.10);
        }

        body.lp-odyssey .lp-cta {
            position: relative;
            background-image: linear-gradient(180deg, rgba(19, 236, 91, 1), rgba(19, 236, 91, 0.80)) !important;
            border: 1px solid rgba(19, 236, 91, 0.38) !important;
            box-shadow:
                0 22px 80px rgba(19, 236, 91, 0.18),
                0 0 0 1px rgba(255, 255, 255, 0.06);
        }

        body.lp-odyssey .lp-cta::after {
            content: "";
            position: absolute;
            inset: -2px;
            border-radius: inherit;
            pointer-events: none;
            background: radial-gradient(420px 120px at 30% 0%, rgba(255, 255, 255, 0.35), transparent 58%);
            opacity: 0.45;
            mix-blend-mode: overlay;
        }

        body.lp-odyssey .text-brand-muted,
        body.lp-odyssey .dark\\:text-gray-400 {
            color: rgba(255, 255, 255, 0.72) !important;
        }

        body.lp-odyssey [data-scene].is-active .lp-reveal {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }

        body.lp-odyssey .lp-reveal {
            opacity: 0.0;
            transform: translate3d(0, 14px, 0);
            transition: opacity 520ms ease, transform 520ms cubic-bezier(.2,.8,.2,1);
            will-change: transform;
        }

        body.lp-odyssey [data-scene].is-active .lp-reveal.lp-reveal-2 { transition-delay: 80ms; }
        body.lp-odyssey [data-scene].is-active .lp-reveal.lp-reveal-3 { transition-delay: 160ms; }

        @media (prefers-reduced-motion: reduce) {
            body.lp-odyssey .lp-lift, body.lp-odyssey .lp-lift:hover { transition: none !important; transform: none !important; }
            body.lp-odyssey .lp-reveal { transition: none !important; transform: none !important; opacity: 1 !important; }
        }
    </style>
</head>
<body class="lp-odyssey bg-background-light dark:bg-background-dark text-brand-navy dark:text-white font-display transition-colors duration-300">
<div aria-hidden="true" class="lp-stage">
<canvas class="lp-stage-canvas"></canvas>
<svg class="lp-stage-fallback" fill="none" viewBox="0 0 1440 900" xmlns="http://www.w3.org/2000/svg">
<defs>
<radialGradient id="s1" cx="0" cy="0" r="1" gradientTransform="translate(520 360) rotate(90) scale(520 620)">
<stop offset="0" stop-color="#13ec5b" stop-opacity="0.22"/>
<stop offset="0.55" stop-color="#7ab4ff" stop-opacity="0.14"/>
<stop offset="1" stop-color="#ffffff" stop-opacity="0"/>
</radialGradient>
<radialGradient id="s2" cx="0" cy="0" r="1" gradientTransform="translate(980 420) rotate(90) scale(560 700)">
<stop offset="0" stop-color="#ff5a8c" stop-opacity="0.18"/>
<stop offset="0.6" stop-color="#13ec5b" stop-opacity="0.10"/>
<stop offset="1" stop-color="#ffffff" stop-opacity="0"/>
</radialGradient>
</defs>
<rect height="900" width="1440" x="0" y="0" fill="#05040a"/>
<circle cx="520" cy="360" fill="url(#s1)" r="520"/>
<circle cx="980" cy="420" fill="url(#s2)" r="560"/>
<path d="M-60 520C180 390 320 360 520 420C740 488 860 520 1050 462C1220 410 1350 330 1520 300" stroke="#7ab4ff" stroke-opacity="0.22" stroke-width="10" stroke-linecap="round"/>
<path d="M-80 610C200 470 360 450 540 508C760 578 900 600 1100 540C1260 492 1360 420 1540 380" stroke="#13ec5b" stroke-opacity="0.22" stroke-width="12" stroke-linecap="round"/>
</svg>
<div class="lp-stage-vignette"></div>
</div>
<div class="relative flex min-h-screen w-full flex-col overflow-x-hidden">
<!-- Header -->
<header class="lp-header sticky top-0 z-50 w-full border-b border-solid border-[#e7f3eb] dark:border-white/10 bg-white/80 dark:bg-background-dark/80 backdrop-blur-md">
<div class="mx-auto max-w-[1200px] px-6 py-4 flex items-center justify-between">
<div class="flex items-center gap-2">
<div class="text-primary">
<svg class="size-8" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z" fill="currentColor" fill-rule="evenodd"></path>
<path clip-rule="evenodd" d="M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z" fill="currentColor" fill-rule="evenodd"></path>
</svg>
</div>
<span class="text-xl font-extrabold tracking-tight">SelUP</span>
</div>
<nav class="hidden md:flex items-center gap-8">
<a class="text-sm font-semibold hover:text-primary transition-colors" href="#features">Возможности</a>
<a class="text-sm font-semibold hover:text-primary transition-colors" href="#process">Как это работает</a>
<a class="text-sm font-semibold hover:text-primary transition-colors" href="#pricing">Тарифы</a>
<a class="text-sm font-semibold hover:text-primary transition-colors" href="#contacts">Контакты</a>
</nav>
<a class="lp-cta bg-primary text-brand-navy text-sm font-bold px-5 py-2.5 rounded-lg shadow-sm hover:brightness-105 active:scale-95 transition-all" href="#contacts">
                    Получить консультацию
                </a>
</div>
</header>
<main class="flex-1">
<!-- Hero Section -->
<section class="lp-chapter relative px-6 py-16 md:py-24 bg-white dark:bg-background-dark" data-scene="hero">
<div class="mx-auto max-w-[1200px] grid md:grid-cols-2 gap-12 items-center">
<div class="lp-panel p-10 md:p-12 flex flex-col gap-8">
<div class="flex flex-col gap-4">
<h1 class="lp-reveal text-4xl md:text-6xl font-black leading-[1.1] tracking-tight text-brand-navy dark:text-white">
                                SelUP — сервис привлечения клиентов для селлеров
                            </h1>
<p class="lp-reveal lp-reveal-2 text-lg md:text-xl text-brand-muted dark:text-gray-400 font-medium max-w-lg">
                                Ваши клиенты приводят новых покупателей. Вы платите только за выкупленные заказы.
                            </p>
</div>
<div class="flex flex-col sm:flex-row gap-4">
<a class="lp-cta lp-reveal lp-reveal-3 bg-primary text-brand-navy text-base font-extrabold px-8 py-4 rounded-xl shadow-lg shadow-primary/20 hover:shadow-primary/40 transition-all text-center" href="#contacts">
                                Получить консультацию
                            </a>
</div>
<div class="lp-reveal lp-reveal-3 flex items-center gap-4 text-sm font-semibold text-brand-muted">
<span class="flex items-center gap-1"><span class="material-symbols-outlined text-primary">check_circle</span> Бесплатный запуск</span>
<span class="flex items-center gap-1"><span class="material-symbols-outlined text-primary">check_circle</span> Быстрый старт</span>
</div>
</div>
<div class="hidden md:block"></div>
</div>
</section>
<!-- Pain Points Section -->
<section class="lp-chapter px-6 py-20 bg-background-light dark:bg-background-dark/50" data-scene="pain">
<div class="lp-panel p-10 md:p-12 mx-auto max-w-[1200px]">
<div class="lp-reveal flex flex-col gap-4 mb-12 max-w-2xl">
<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">Комиссии маркетплейсов съедают вашу прибыль?</h2>
<p class="text-lg text-brand-muted dark:text-gray-400">Условия меняются каждые несколько месяцев, комиссии уже доходят до 50%, реклама дорожает, а маржа тает. SelUP меняет правила игры.</p>
</div>
<div class="grid md:grid-cols-3 gap-6">
<div class="lp-surface lp-lift p-8 rounded-2xl bg-white dark:bg-gray-900 border border-[#cfe7d7] dark:border-white/5 flex flex-col gap-4">
<span class="material-symbols-outlined text-4xl text-red-500">currency_ruble</span>
<h3 class="text-xl font-bold">Комиссии до 50%</h3>
<p class="text-brand-muted dark:text-gray-400">Ставки и правила растут и меняются — планировать маржу становится сложнее.</p>
</div>
<div class="lp-surface lp-lift p-8 rounded-2xl bg-white dark:bg-gray-900 border border-[#cfe7d7] dark:border-white/5 flex flex-col gap-4">
<span class="material-symbols-outlined text-4xl text-red-500">campaign</span>
<h3 class="text-xl font-bold">Реклама дорожает</h3>
<p class="text-brand-muted dark:text-gray-400">Бюджеты уходят в клики и охваты — без гарантии выкупленных заказов.</p>
</div>
<div class="lp-surface lp-lift p-8 rounded-2xl bg-white dark:bg-gray-900 border border-[#cfe7d7] dark:border-white/5 flex flex-col gap-4">
<span class="material-symbols-outlined text-4xl text-red-500">trending_down</span>
<h3 class="text-xl font-bold">Маржа тает</h3>
<p class="text-brand-muted dark:text-gray-400">Чем выше расходы на привлечение, тем сложнее масштабировать продажи.</p>
</div>
</div>
</div>
</section>
	<!-- Solution Section -->
		<section class="lp-chapter px-6 py-12" data-scene="solution">
		<div class="mx-auto max-w-[1200px]">
		<div class="lp-panel lp-reveal bg-brand-navy dark:bg-primary/10 rounded-3xl p-8 md:p-12 overflow-hidden relative group">
	<div class="absolute inset-0 bg-primary opacity-5 mix-blend-overlay"></div>
	<div class="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8">
	<div class="flex flex-col gap-4">
	<span class="bg-primary/20 text-primary px-3 py-1 rounded-full text-xs font-bold w-fit uppercase tracking-wider">Наше решение</span>
	<h2 class="text-3xl md:text-5xl font-black text-white leading-tight"><span class="text-primary underline decoration-primary/40 underline-offset-8">Модель SelUP</span>: Сначала продажи — потом оплата</h2>
	<p class="text-lg text-gray-400 max-w-xl">Вы инвестируете в результат, а не в охваты.</p>
	</div>
		<a class="lp-cta bg-primary text-brand-navy px-10 py-5 rounded-2xl font-black text-lg hover:scale-105 transition-transform shrink-0 text-center" href="#contacts">
		                                Получить консультацию
		                            </a>
</div>
</div>
</div>
</section>
<!-- How it works (Customer Journey) -->
<section class="lp-chapter px-6 py-20 bg-background-light dark:bg-background-dark/30" data-scene="process" id="process">
<div class="lp-panel p-10 md:p-12 mx-auto max-w-[1200px]">
<div class="lp-reveal text-center mb-16">
<h2 class="text-3xl md:text-5xl font-extrabold mb-4">Пусть клиенты продают за вас</h2>
<p class="text-xl text-brand-muted dark:text-gray-400 max-w-3xl mx-auto">Лояльные покупатели рекомендуют ваш бренд друзьям и подписчикам — в соцсетях, мессенджерах и личных блогах. Это не прямая реклама, а честные рекомендации на основе реального опыта — поэтому они дают высокую конверсию.</p>
</div>
<div class="grid md:grid-cols-4 gap-8 relative">
<div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-primary/30 to-transparent -translate-y-1/2"></div>
<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/10 shadow-sm">
<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-3xl">shopping_bag</span>
</div>
<h4 class="font-bold text-lg leading-tight">Покупатель уже с вами</h4>
<p class="text-sm text-brand-muted dark:text-gray-400">После покупки получает приглашение рекомендовать и делиться витриной</p>
</div>
<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/10 shadow-sm">
<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-3xl">link</span>
</div>
<h4 class="font-bold text-lg leading-tight">Получает персональную ссылку</h4>
<p class="text-sm text-brand-muted dark:text-gray-400">SelUP создаёт витрину и уникальную ссылку, чтобы всё корректно считалось</p>
</div>
<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/10 shadow-sm">
<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-3xl">share</span>
</div>
<h4 class="font-bold text-lg leading-tight">Делится рекомендацией</h4>
<p class="text-sm text-brand-muted dark:text-gray-400">В соцсетях, мессенджерах и личных блогах — там, где доверие сильнее рекламы</p>
</div>
<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/10 shadow-sm">
<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-3xl">payments</span>
</div>
<h4 class="font-bold text-lg leading-tight">Бонус за реальный результат</h4>
<p class="text-sm text-brand-muted dark:text-gray-400">Друг оформляет заказ в витрине SelUP — бонус начисляется после оплаты и выкупа</p>
</div>
</div>
</div>
</section>
		<!-- Setup (4 steps) -->
		<section class="lp-chapter px-6 py-20 bg-white dark:bg-background-dark" data-scene="setup" id="setup">
		<div class="lp-panel p-10 md:p-12 mx-auto max-w-[1200px]">
		<div class="lp-reveal text-center mb-16">
	<h2 class="text-3xl md:text-5xl font-extrabold mb-4">Всё сделаем сами</h2>
	<p class="text-xl text-brand-muted">Вам нужно только оставить заявку. Дальше подключаем CRM, собираем витрину и запускаем рекомендации.</p>
	</div>
	<div class="grid md:grid-cols-4 gap-8 relative">
	<!-- Connecting Line (Desktop) -->
	<div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-primary/30 to-transparent -translate-y-1/2"></div>
		<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/5">
	<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
	<span class="material-symbols-outlined text-3xl">cloud_upload</span>
	</div>
	<h4 class="font-bold text-lg leading-tight">Подключаем CRM и каталог</h4>
	<p class="text-sm text-brand-muted">Подключаем вашу CRM, чтобы загрузить каталог на платформу и учитывать заказы и выкупы</p>
	</div>
		<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/5">
	<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
	<span class="material-symbols-outlined text-3xl">storefront</span>
	</div>
<h4 class="font-bold text-lg leading-tight">Создаём витрину товаров</h4>
<p class="text-sm text-brand-muted">Собираем мобильную витрину SelUP и выдаём ссылки рекомендателям</p>
</div>
<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/5">
<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-3xl">share</span>
</div>
<h4 class="font-bold text-lg leading-tight">Клиенты рекомендуют</h4>
<p class="text-sm text-brand-muted">Делятся ссылкой в соцсетях, мессенджерах и личных блогах</p>
</div>
<div class="lp-surface lp-lift relative z-10 flex flex-col items-center text-center gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-primary/5">
<div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-brand-navy shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-3xl">payments</span>
</div>
<h4 class="font-bold text-lg leading-tight">Начисляем и выплачиваем вознаграждение</h4>
<p class="text-sm text-brand-muted">Покупатель оформляет заказ в витрине SelUP. Вознаграждение — после оплаты и выкупа</p>
</div>
</div>
</div>
</section>
<!-- Benefits -->
<section class="lp-chapter px-6 py-20 bg-background-light dark:bg-background-dark/30" data-scene="features" id="features">
<div class="lp-panel p-10 md:p-12 mx-auto max-w-[1200px]">
<div class="grid md:grid-cols-3 gap-8">
<div class="lp-surface lp-lift bg-white dark:bg-gray-900 p-10 rounded-3xl border border-primary/10 shadow-sm hover:shadow-xl transition-all">
<div class="w-12 h-12 bg-primary/10 text-primary rounded-xl flex items-center justify-center mb-6">
<span class="material-symbols-outlined">rocket_launch</span>
</div>
<h3 class="text-2xl font-bold mb-4 leading-tight">Рост без аванса на рекламу</h3>
<p class="text-brand-muted dark:text-gray-400">Не нужно заранее вкладываться в трафик. Расходы формируются из части прибыли от уже совершенных продаж.</p>
</div>
<div class="lp-surface lp-lift bg-white dark:bg-gray-900 p-10 rounded-3xl border border-primary/10 shadow-sm hover:shadow-xl transition-all">
<div class="w-12 h-12 bg-primary/10 text-primary rounded-xl flex items-center justify-center mb-6">
<span class="material-symbols-outlined">verified_user</span>
</div>
<h3 class="text-2xl font-bold mb-4 leading-tight">Доверие к бренду</h3>
<p class="text-brand-muted dark:text-gray-400">Рекомендации реальных покупателей обычно конвертируют лучше, чем холодная реклама.</p>
</div>
<div class="lp-surface lp-lift bg-white dark:bg-gray-900 p-10 rounded-3xl border border-primary/10 shadow-sm hover:shadow-xl transition-all">
<div class="w-12 h-12 bg-primary/10 text-primary rounded-xl flex items-center justify-center mb-6">
<span class="material-symbols-outlined">analytics</span>
</div>
<h3 class="text-2xl font-bold mb-4 leading-tight">Предсказуемые расходы</h3>
<p class="text-brand-muted dark:text-gray-400">Вы заранее понимаете стоимость привлечения клиента. Фиксированная комиссия упрощает планирование юнит-экономики.</p>
</div>
</div>
</div>
</section>
<!-- Payment Model -->
<section class="lp-chapter px-6 py-20 bg-white dark:bg-background-dark" data-scene="pricing" id="pricing">
<div class="lp-panel p-10 md:p-12 mx-auto max-w-[960px] text-center">
<h2 class="lp-reveal text-4xl md:text-5xl font-black mb-12">Платите только за результат</h2>
<div class="lp-reveal lp-reveal-2 bg-primary text-brand-navy p-10 rounded-[2.5rem] shadow-2xl relative">
<div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-brand-navy text-white text-xs font-black px-6 py-2 rounded-full tracking-widest uppercase">
                            Модель сотрудничества
                        </div>
<div class="flex flex-col items-center gap-4">
<div class="text-6xl md:text-8xl font-black tracking-tighter">Фикс %</div>
<p class="text-xl md:text-2xl font-bold max-w-lg">Комиссия только за оплаченный и выкупленный заказ</p>
<div class="h-px w-full bg-brand-navy/10 my-4"></div>
<div class="grid grid-cols-2 md:grid-cols-4 gap-8 w-full">
<div class="flex flex-col gap-1">
<span class="text-3xl font-black">0₽</span>
<span class="text-xs font-bold uppercase">Вход</span>
</div>
<div class="flex flex-col gap-1">
<span class="text-3xl font-black">0₽</span>
<span class="text-xs font-bold uppercase">Поддержка</span>
</div>
<div class="flex flex-col gap-1">
<span class="text-3xl font-black">100%</span>
<span class="text-xs font-bold uppercase">Прозрачность расчетов</span>
</div>
<div class="flex flex-col gap-1">
<span class="text-3xl font-black">∞</span>
<span class="text-xs font-bold uppercase">Масштабирование</span>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- Full Service -->
<section class="lp-chapter px-6 py-20 bg-background-light dark:bg-background-dark/30" data-scene="tools">
<div class="lp-panel p-10 md:p-12 mx-auto max-w-[1200px]">
<h2 class="lp-reveal text-3xl md:text-4xl font-extrabold mb-12 text-center">Все инструменты в одном окне</h2>
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
<div class="flex items-start gap-5">
<span class="material-symbols-outlined text-primary text-3xl">hub</span>
<div>
<h4 class="font-bold text-lg mb-1">CRM интеграция</h4>
<p class="text-brand-muted text-sm">Синхронизация заказов с вашей CRM.</p>
</div>
</div>
<div class="flex items-start gap-5">
<span class="material-symbols-outlined text-primary text-3xl">store</span>
<div>
<h4 class="font-bold text-lg mb-1">Витрины товаров</h4>
<p class="text-brand-muted text-sm">Автоматические мобильные витрины под ваши товары</p>
</div>
</div>
<div class="flex items-start gap-5">
<span class="material-symbols-outlined text-primary text-3xl">link</span>
<div>
<h4 class="font-bold text-lg mb-1">Реферальные ссылки</h4>
<p class="text-brand-muted text-sm">Автоматическая генерация уникальных ссылок для каждого клиента.</p>
</div>
</div>
<div class="flex items-start gap-5">
<span class="material-symbols-outlined text-primary text-3xl">history_edu</span>
<div>
<h4 class="font-bold text-lg mb-1">Маркировка рекламы</h4>
<p class="text-brand-muted text-sm">Соответствие требованиям по маркировке рекламы — берем на себя.</p>
</div>
</div>
<div class="flex items-start gap-5">
<span class="material-symbols-outlined text-primary text-3xl">monitoring</span>
<div>
<h4 class="font-bold text-lg mb-1">Аналитика</h4>
<p class="text-brand-muted text-sm">Метрики по каждому рекомендателю: заказы, выкупы, начисления и эффективность</p>
</div>
</div>
<div class="flex items-start gap-5">
<span class="material-symbols-outlined text-primary text-3xl">account_balance_wallet</span>
<div>
<h4 class="font-bold text-lg mb-1">Выплаты</h4>
<p class="text-brand-muted text-sm">Автоматизированный процесс вознаграждения участников программы.</p>
</div>
</div>
</div>
</div>
</section>
		<!-- Footer CTA -->
		<section class="lp-chapter px-6 py-24 bg-white dark:bg-background-dark overflow-hidden relative" data-scene="contacts" id="contacts">
		<div class="absolute -right-20 -bottom-20 w-96 h-96 bg-primary/10 rounded-full blur-[100px]"></div>
		<div class="lp-panel p-10 md:p-12 mx-auto max-w-[1200px] grid md:grid-cols-2 gap-16 items-center relative z-10">
	<div class="flex flex-col gap-6">
	<h2 class="text-4xl md:text-5xl font-black">Готовы масштабировать продажи?</h2>
	<p class="text-xl text-brand-muted">Оставьте заявку на бесплатную консультацию</p>
<div class="flex flex-col gap-4 mt-4">
<div class="flex items-center gap-3">
<span class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary">
<span class="material-symbols-outlined">call</span>
</span>
<span class="font-bold text-lg">+7 (999) 000-00-00</span>
</div>
<div class="flex items-center gap-3">
<span class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary">
<span class="material-symbols-outlined">mail</span>
</span>
<span class="font-bold text-lg">hello@selup.ru</span>
</div>
</div>
</div>
	<div class="lp-surface bg-background-light dark:bg-gray-900 p-8 md:p-10 rounded-[2rem] border border-primary/10 shadow-xl">
	<form class="flex flex-col gap-6">
<div class="flex flex-col gap-2">
<label class="text-sm font-bold uppercase tracking-wider text-brand-muted">Ваше имя</label>
<input class="w-full px-5 py-4 rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-background-dark focus:ring-primary focus:border-primary transition-all" placeholder="Иван Иванов" type="text"/>
</div>
<div class="flex flex-col gap-2">
<label class="text-sm font-bold uppercase tracking-wider text-brand-muted">Телефон</label>
<input class="w-full px-5 py-4 rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-background-dark focus:ring-primary focus:border-primary transition-all" placeholder="+7 (___) ___-__-__" type="tel"/>
</div>
	<button class="lp-cta bg-primary text-brand-navy w-full py-5 rounded-xl font-black text-lg shadow-lg shadow-primary/20 hover:shadow-primary/40 transition-all mt-2" type="submit">
	                                Получить консультацию
	                            </button>
<p class="text-[10px] text-center text-brand-muted uppercase font-bold tracking-widest opacity-60">
                                Нажимая кнопку, вы соглашаетесь с политикой конфиденциальности
                            </p>
	</form>
	</div>
	</div>
		</section>
		<!-- FAQ -->
		<section class="lp-chapter px-6 py-20 bg-background-light dark:bg-background-dark/30" data-scene="faq" id="faq">
		<div class="lp-panel p-10 md:p-12 mx-auto max-w-[960px]">
		<div class="lp-reveal text-center mb-12">
		<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">FAQ</h2>
		<p class="text-lg text-brand-muted dark:text-gray-400 mt-3">Короткие ответы на частые вопросы.</p>
		</div>
		<div class="flex flex-col gap-4">
		<details class="lp-surface group bg-background-light dark:bg-gray-900 border border-primary/10 rounded-2xl p-6">
		<summary class="flex cursor-pointer list-none items-center justify-between gap-4 font-bold">
		<span>Что такое «выкупленный заказ» и как учитываются возвраты?</span>
		<span class="material-symbols-outlined text-primary transition-transform group-open:rotate-180">expand_more</span>
		</summary>
		<div class="mt-4 text-brand-muted dark:text-gray-400 leading-relaxed">
		Выкупленный заказ — это заказ, который оплачен и не ушел в отмену/возврат по итогам периода подтверждения. Если заказ возвращен, он не считается результатом и не участвует в расчете вознаграждения.
		</div>
		</details>
		<details class="lp-surface group bg-background-light dark:bg-gray-900 border border-primary/10 rounded-2xl p-6">
		<summary class="flex cursor-pointer list-none items-center justify-between gap-4 font-bold">
		<span>Где происходит покупка: SelUP, сайт бренда или маркетплейс?</span>
		<span class="material-symbols-outlined text-primary transition-transform group-open:rotate-180">expand_more</span>
		</summary>
		<div class="mt-4 text-brand-muted dark:text-gray-400 leading-relaxed">
		Покупатель оформляет заказ в витрине/чекауте SelUP. Так мы можем прозрачно связать заказ с рекомендателем и учитывать оплату и выкуп.
		</div>
		</details>
		<details class="lp-surface group bg-background-light dark:bg-gray-900 border border-primary/10 rounded-2xl p-6">
		<summary class="flex cursor-pointer list-none items-center justify-between gap-4 font-bold">
		<span>Какие интеграции на старте?</span>
		<span class="material-symbols-outlined text-primary transition-transform group-open:rotate-180">expand_more</span>
		</summary>
		<div class="mt-4 text-brand-muted dark:text-gray-400 leading-relaxed">
		На старте подключаем вашу CRM, чтобы загрузить каталог на платформу, учитывать заказы и выкупы и прозрачно считать результат.
		</div>
		</details>
		<details class="lp-surface group bg-background-light dark:bg-gray-900 border border-primary/10 rounded-2xl p-6">
		<summary class="flex cursor-pointer list-none items-center justify-between gap-4 font-bold">
		<span>Как работают вознаграждения рекомендателям?</span>
		<span class="material-symbols-outlined text-primary transition-transform group-open:rotate-180">expand_more</span>
		</summary>
		<div class="mt-4 text-brand-muted dark:text-gray-400 leading-relaxed">
		Вознаграждение начисляется по факту оплаченного и выкупленного заказа. Вы платите фиксированную комиссию только за результат — без кликов и показов.
		</div>
		</details>
		<details class="lp-surface group bg-background-light dark:bg-gray-900 border border-primary/10 rounded-2xl p-6">
		<summary class="flex cursor-pointer list-none items-center justify-between gap-4 font-bold">
		<span>Как быстро можно запуститься?</span>
		<span class="material-symbols-outlined text-primary transition-transform group-open:rotate-180">expand_more</span>
		</summary>
		<div class="mt-4 text-brand-muted dark:text-gray-400 leading-relaxed">
		Нужно только оставить заявку. Мы свяжемся, обсудим задачу и поможем всё подключить и запустить.
		</div>
		</details>
		</div>
		</div>
		</section>
	</main>
	<footer class="bg-brand-navy text-white px-6 py-12 border-t border-white/5">
	<div class="mx-auto max-w-[1200px] flex flex-col md:flex-row justify-between items-center gap-8">
	<div class="flex items-center gap-2">
<div class="text-primary">
<svg class="size-6" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z" fill="currentColor" fill-rule="evenodd"></path>
<path clip-rule="evenodd" d="M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z" fill="currentColor" fill-rule="evenodd"></path>
</svg>
</div>
<span class="text-xl font-extrabold tracking-tight">SelUP</span>
</div>
<div class="text-gray-400 text-sm">
                    © 2026 SelUP
                </div>
<div class="flex gap-6">
<a class="text-gray-400 hover:text-white transition-colors" href="#">Telegram</a>
<a class="text-gray-400 hover:text-white transition-colors" href="#">VKontakte</a>
</div>
</div>
	</footer>
</div>
<script type="module">
	(async () => {
		const body = document.body;
		const prefersReducedMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

		const chapters = Array.from(document.querySelectorAll("main section[data-scene]"));
		const stageCanvas = document.querySelector(".lp-stage-canvas");

		const clamp01 = (v) => Math.max(0, Math.min(1, v));
		const lerp = (a, b, t) => a + (b - a) * t;
		const smoothstep = (a, b, t) => {
			const x = clamp01((t - a) / (b - a));
			return x * x * (3 - 2 * x);
		};

		const setCssVar = (name, value) => body.style.setProperty(name, value);

		let viewportH = window.innerHeight;
		const updateViewport = () => {
			viewportH = window.innerHeight;
			setCssVar("--lp-vh", `${viewportH}`);
		};
		updateViewport();
		window.addEventListener("resize", updateViewport, { passive: true });

		let activeIdx = 0;
		let activeProgress = 0;
		let story = 0;

		const activateChapter = (idx) => {
			const safeIdx = Math.max(0, Math.min(chapters.length - 1, idx));
			if (safeIdx === activeIdx && body.dataset.scene) return;
			activeIdx = safeIdx;
			const sceneName = chapters[activeIdx]?.dataset?.scene || "";
			body.dataset.active = String(activeIdx);
			body.dataset.scene = sceneName;
		};

		const revealObserver = new IntersectionObserver(
			(entries) => {
				for (const entry of entries) {
					if (entry.isIntersecting) entry.target.classList.add("is-active");
				}
			},
			{ threshold: 0.22 },
		);
		for (const ch of chapters) revealObserver.observe(ch);

		const computeScrollState = () => {
			const scrollY = window.scrollY || window.pageYOffset || 0;
			const doc = document.documentElement;
			const maxScroll = Math.max(1, (doc.scrollHeight || 1) - viewportH);
			story = clamp01(scrollY / maxScroll);
			setCssVar("--lp-scroll", `${scrollY}`);
			setCssVar("--lp-scroll-n", `${story}`);
			setCssVar("--lp-story", `${story}`);

			if (!chapters.length) return;

			const mid = scrollY + viewportH * 0.52;
			let bestIdx = 0;
			let bestDist = Infinity;
			let bestProgress = 0;

			for (let i = 0; i < chapters.length; i += 1) {
				const el = chapters[i];
				const top = el.getBoundingClientRect().top + scrollY;
				const h = Math.max(1, el.offsetHeight);
				const center = top + h * 0.5;
				const dist = Math.abs(mid - center);
				if (dist < bestDist) {
					bestDist = dist;
					bestIdx = i;
					bestProgress = clamp01((mid - top) / h);
				}
			}

			activeProgress = bestProgress;
			setCssVar("--lp-scene-progress", `${activeProgress}`);
			activateChapter(bestIdx);
		};

		// Reduced motion: keep content readable and avoid scroll-driven "scene" changes.
		if (prefersReducedMotion) {
			computeScrollState();
			if (chapters[0]) chapters[0].classList.add("is-active");
		}

		let lastNow = performance.now();
		let t = 0;
		let rafId = 0;

		// === Three.js stage (best-effort; SVG fallback remains if anything fails) ===
		let THREE;
		let RoomEnvironment;
		let EffectComposer;
		let RenderPass;
		let UnrealBloomPass;

		let renderer;
		let scene;
		let camera;
		let composer;
		let bloomPass;

		let artifactGroup;
		let shellMat;
		let shellShader;

		let points;
		let fog;
		let keyLight;
		let rimLight;
		let fillLight;

		const DPR_CAP_DESKTOP = 2;
		const DPR_CAP_MOBILE = 1.25;

		const isMobile = () => window.matchMedia && window.matchMedia("(max-width: 767px)").matches;
		const canUsePost = () => !prefersReducedMotion && !isMobile();

		const SCENE_KEYS = {
			hero: {
				accentA: [19, 236, 91],
				accentB: [122, 180, 255],
				cam: [0.2, 0.1, 4.4],
				target: [0, 0.05, 0],
				light: { key: [1.7, 2.4, 2.0], rim: [-2.0, 2.2, -1.8] },
				fog: 0.020,
				bloom: 0.85,
				mat: { rough: 0.07, trans: 1.0, thick: 0.55, irid: 1.0 },
				disp: 0.10,
			},
			pain: {
				accentA: [255, 90, 140],
				accentB: [80, 115, 255],
				cam: [1.35, 0.55, 4.9],
				target: [0.2, 0.1, 0],
				light: { key: [2.2, 1.7, 1.4], rim: [-2.4, 2.5, -2.2] },
				fog: 0.040,
				bloom: 0.65,
				mat: { rough: 0.18, trans: 0.55, thick: 0.35, irid: 0.8 },
				disp: 0.18,
			},
			solution: {
				accentA: [19, 236, 91],
				accentB: [210, 110, 255],
				cam: [-1.1, 0.25, 4.2],
				target: [-0.1, 0.0, 0],
				light: { key: [1.8, 2.7, 2.5], rim: [2.4, 1.7, -1.9] },
				fog: 0.018,
				bloom: 0.95,
				mat: { rough: 0.06, trans: 1.0, thick: 0.7, irid: 1.0 },
				disp: 0.08,
			},
			process: {
				accentA: [122, 180, 255],
				accentB: [255, 90, 140],
				cam: [0.0, 1.1, 4.6],
				target: [0, 0.25, 0],
				light: { key: [0.9, 3.0, 2.0], rim: [-2.8, 1.7, -2.8] },
				fog: 0.026,
				bloom: 0.8,
				mat: { rough: 0.09, trans: 0.9, thick: 0.55, irid: 1.0 },
				disp: 0.12,
			},
			features: {
				accentA: [19, 236, 91],
				accentB: [122, 180, 255],
				cam: [1.0, -0.35, 4.35],
				target: [0.1, -0.1, 0],
				light: { key: [2.4, 2.2, 1.7], rim: [-2.7, 2.1, -2.0] },
				fog: 0.022,
				bloom: 0.9,
				mat: { rough: 0.08, trans: 1.0, thick: 0.6, irid: 1.0 },
				disp: 0.10,
			},
			pricing: {
				accentA: [19, 236, 91],
				accentB: [255, 255, 255],
				cam: [-0.5, 0.15, 5.1],
				target: [-0.1, 0.1, 0],
				light: { key: [1.8, 2.6, 2.8], rim: [2.0, 2.0, -2.6] },
				fog: 0.017,
				bloom: 0.75,
				mat: { rough: 0.12, trans: 0.75, thick: 0.5, irid: 0.75 },
				disp: 0.06,
			},
			contacts: {
				accentA: [122, 180, 255],
				accentB: [19, 236, 91],
				cam: [0.0, 0.05, 5.6],
				target: [0, 0.05, 0],
				light: { key: [1.6, 2.4, 3.0], rim: [-2.0, 1.8, -3.2] },
				fog: 0.014,
				bloom: 0.55,
				mat: { rough: 0.14, trans: 0.6, thick: 0.45, irid: 0.6 },
				disp: 0.04,
			},
			faq: {
				accentA: [255, 90, 140],
				accentB: [122, 180, 255],
				cam: [0.4, 0.2, 5.9],
				target: [0.05, 0.05, 0],
				light: { key: [1.5, 2.2, 3.1], rim: [-1.7, 2.0, -3.1] },
				fog: 0.013,
				bloom: 0.5,
				mat: { rough: 0.16, trans: 0.5, thick: 0.4, irid: 0.55 },
				disp: 0.03,
			},
			__default: {
				accentA: [19, 236, 91],
				accentB: [122, 180, 255],
				cam: [0.2, 0.1, 4.9],
				target: [0, 0, 0],
				light: { key: [1.7, 2.4, 2.0], rim: [-2.0, 2.2, -1.8] },
				fog: 0.020,
				bloom: 0.8,
				mat: { rough: 0.1, trans: 0.9, thick: 0.55, irid: 1.0 },
				disp: 0.1,
			},
		};

		const getSceneKey = (name) => SCENE_KEYS[name] || SCENE_KEYS.__default;

		const applyCssAccents = (a, b) => {
			setCssVar("--lp-accent-a", `${Math.round(a[0])} ${Math.round(a[1])} ${Math.round(a[2])}`);
			setCssVar("--lp-accent-b", `${Math.round(b[0])} ${Math.round(b[1])} ${Math.round(b[2])}`);
		};

		const mixKey = (k1, k2, tMix) => {
			const mix3 = (a, b) => [lerp(a[0], b[0], tMix), lerp(a[1], b[1], tMix), lerp(a[2], b[2], tMix)];
			return {
				accentA: mix3(k1.accentA, k2.accentA),
				accentB: mix3(k1.accentB, k2.accentB),
				cam: mix3(k1.cam, k2.cam),
				target: mix3(k1.target, k2.target),
				light: {
					key: mix3(k1.light.key, k2.light.key),
					rim: mix3(k1.light.rim, k2.light.rim),
				},
				fog: lerp(k1.fog, k2.fog, tMix),
				bloom: lerp(k1.bloom, k2.bloom, tMix),
				mat: {
					rough: lerp(k1.mat.rough, k2.mat.rough, tMix),
					trans: lerp(k1.mat.trans, k2.mat.trans, tMix),
					thick: lerp(k1.mat.thick, k2.mat.thick, tMix),
					irid: lerp(k1.mat.irid, k2.mat.irid, tMix),
				},
				disp: lerp(k1.disp, k2.disp, tMix),
			};
		};

		const updateScene = () => {
			const currentName = body.dataset.scene || chapters[activeIdx]?.dataset?.scene || "hero";
			const nextName = chapters[Math.min(activeIdx + 1, chapters.length - 1)]?.dataset?.scene || currentName;

			const kNow = getSceneKey(currentName);
			const kNext = getSceneKey(nextName);

			const transitionT = smoothstep(0.65, 1.0, activeProgress);
			const k = mixKey(kNow, kNext, transitionT);

			applyCssAccents(k.accentA, k.accentB);

			if (!renderer || !scene || !camera) return;

			camera.position.set(k.cam[0], k.cam[1], k.cam[2]);
			camera.lookAt(k.target[0], k.target[1], k.target[2]);

			keyLight.position.set(k.light.key[0], k.light.key[1], k.light.key[2]);
			rimLight.position.set(k.light.rim[0], k.light.rim[1], k.light.rim[2]);

			if (fog) fog.density = k.fog;
			if (bloomPass) bloomPass.strength = k.bloom;

			if (shellMat) {
				shellMat.roughness = k.mat.rough;
				shellMat.transmission = k.mat.trans;
				shellMat.thickness = k.mat.thick;
				shellMat.iridescence = k.mat.irid;
				shellMat.needsUpdate = false;
			}

			if (shellShader) {
				shellShader.uniforms.uDisp.value = prefersReducedMotion ? 0 : k.disp;
			}
		};

		const renderFrame = () => {
			if (!renderer) return;
			if (composer) composer.render();
			else renderer.render(scene, camera);
		};

		const startLoop = () => {
			if (prefersReducedMotion) return;
			if (rafId) return;
			lastNow = performance.now();
			const loop = (now) => {
				rafId = requestAnimationFrame(loop);
				if (document.visibilityState === "hidden") return;

				const dt = Math.min(0.05, Math.max(0, (now - lastNow) / 1000));
				lastNow = now;
				t += dt;
				setCssVar("--lp-t", `${t}`);

				computeScrollState();
				updateScene();

				if (artifactGroup) {
					const wobble = 0.14 + 0.12 * Math.sin(t * 0.8);
					artifactGroup.rotation.y = story * Math.PI * 2.2 + t * 0.35;
					artifactGroup.rotation.x = Math.sin(t * 0.5) * wobble;
				}

				if (points) {
					points.rotation.y = -story * Math.PI * 1.2 + t * 0.05;
				}

				if (shellShader) {
					shellShader.uniforms.uTime.value = t;
				}

				renderFrame();
			};
			rafId = requestAnimationFrame(loop);
		};

		const stopLoop = () => {
			if (!rafId) return;
			cancelAnimationFrame(rafId);
			rafId = 0;
		};

		const initThree = async () => {
			if (!stageCanvas) return;

			try {
				THREE = await import("three");
				({ RoomEnvironment } = await import("three/addons/environments/RoomEnvironment.js"));
				({ EffectComposer } = await import("three/addons/postprocessing/EffectComposer.js"));
				({ RenderPass } = await import("three/addons/postprocessing/RenderPass.js"));
				({ UnrealBloomPass } = await import("three/addons/postprocessing/UnrealBloomPass.js"));
			} catch (e) {
				console.warn("[SelUP 3D] Three.js failed to load; keeping SVG fallback.", e);
				body.classList.add("lp-webgl-failed");
				return;
			}

			let gl;
			try {
				gl = stageCanvas.getContext("webgl2", { antialias: true, alpha: true, powerPreference: "high-performance" });
			} catch {
				gl = null;
			}
			if (!gl) {
				try {
					gl = stageCanvas.getContext("webgl", { antialias: true, alpha: true, powerPreference: "high-performance" });
				} catch {
					gl = null;
				}
			}
			if (!gl) {
				console.warn("[SelUP 3D] WebGL not available; keeping SVG fallback.");
				body.classList.add("lp-webgl-failed");
				return;
			}

			const dprCap = isMobile() ? DPR_CAP_MOBILE : DPR_CAP_DESKTOP;
			const dpr = Math.min(window.devicePixelRatio || 1, dprCap);

			renderer = new THREE.WebGLRenderer({
				canvas: stageCanvas,
				context: gl,
				alpha: true,
				antialias: true,
				powerPreference: "high-performance",
			});
			renderer.setPixelRatio(dpr);
			renderer.setSize(window.innerWidth, window.innerHeight, false);
			renderer.outputColorSpace = THREE.SRGBColorSpace;
			renderer.toneMapping = THREE.ACESFilmicToneMapping;
			renderer.toneMappingExposure = 1.1;
			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;
			renderer.physicallyCorrectLights = true;

			scene = new THREE.Scene();
			fog = new THREE.FogExp2(0x05040a, 0.02);
			scene.fog = fog;

			camera = new THREE.PerspectiveCamera(45, window.innerWidth / Math.max(1, window.innerHeight), 0.1, 60);

			const pmrem = new THREE.PMREMGenerator(renderer);
			const envTex = pmrem.fromScene(new RoomEnvironment(), 0.04).texture;
			scene.environment = envTex;

			keyLight = new THREE.DirectionalLight(0xffffff, 3.2);
			keyLight.position.set(1.7, 2.4, 2.0);
			keyLight.castShadow = true;
			keyLight.shadow.mapSize.set(1024, 1024);
			keyLight.shadow.radius = 4;
			keyLight.shadow.bias = -0.0001;
			scene.add(keyLight);

			rimLight = new THREE.DirectionalLight(0x86c8ff, 2.0);
			rimLight.position.set(-2.0, 2.2, -1.8);
			scene.add(rimLight);

			fillLight = new THREE.HemisphereLight(0xffffff, 0x05040a, 0.7);
			scene.add(fillLight);

			const ground = new THREE.Mesh(new THREE.PlaneGeometry(16, 16), new THREE.ShadowMaterial({ opacity: 0.34 }));
			ground.rotation.x = -Math.PI / 2;
			ground.position.y = -1.45;
			ground.receiveShadow = true;
			scene.add(ground);

			artifactGroup = new THREE.Group();
			artifactGroup.position.set(0, -0.15, 0);

			const hiGeo = new THREE.IcosahedronGeometry(1.05, isMobile() ? 4 : 6);
			shellMat = new THREE.MeshPhysicalMaterial({
				color: new THREE.Color("#ffffff"),
				roughness: 0.07,
				metalness: 0.0,
				transmission: 1.0,
				thickness: 0.55,
				ior: 1.35,
				clearcoat: 1.0,
				clearcoatRoughness: 0.12,
				attenuationColor: new THREE.Color("#7ab4ff"),
				attenuationDistance: 1.1,
				iridescence: 1.0,
				iridescenceIOR: 1.3,
				iridescenceThicknessRange: [120, 520],
				specularIntensity: 1.0,
				specularColor: new THREE.Color("#ffffff"),
			});

			shellMat.onBeforeCompile = (shader) => {
				shader.uniforms.uTime = { value: 0 };
				shader.uniforms.uDisp = { value: 0.1 };
				shader.vertexShader = shader.vertexShader.replace(
					"#include <begin_vertex>",
					`
					#include <begin_vertex>
					float n = sin(dot(normalize(normal), vec3(12.9898, 78.233, 37.719)) * 1.55 + uTime * 1.15);
					transformed += normalize(normal) * (n * 0.5 + 0.5) * uDisp;
					`,
				);
				shellShader = shader;
			};

			const shell = new THREE.Mesh(hiGeo, shellMat);
			shell.castShadow = true;
			artifactGroup.add(shell);

			const coreGeo = new THREE.IcosahedronGeometry(0.78, isMobile() ? 3 : 5);
			const coreMat = new THREE.MeshStandardMaterial({
				color: new THREE.Color("#13ec5b"),
				emissive: new THREE.Color("#13ec5b"),
				emissiveIntensity: 0.8,
				roughness: 0.4,
				metalness: 0.0,
				transparent: true,
				opacity: 0.85,
			});
			const core = new THREE.Mesh(coreGeo, coreMat);
			artifactGroup.add(core);

			scene.add(artifactGroup);

			// Particles (deep space dust)
			const count = isMobile() ? 900 : 2200;
			const pGeo = new THREE.BufferGeometry();
			const pos = new Float32Array(count * 3);
			for (let i = 0; i < count; i += 1) {
				const r = 3.6 + Math.random() * 3.2;
				const a = Math.random() * Math.PI * 2;
				const y = (Math.random() - 0.5) * 3.2;
				pos[i * 3 + 0] = Math.cos(a) * r;
				pos[i * 3 + 1] = y;
				pos[i * 3 + 2] = Math.sin(a) * r * 0.75;
			}
			pGeo.setAttribute("position", new THREE.BufferAttribute(pos, 3));
			const pMat = new THREE.PointsMaterial({
				color: new THREE.Color("#7ab4ff"),
				size: isMobile() ? 0.018 : 0.022,
				transparent: true,
				opacity: 0.5,
				depthWrite: false,
				blending: THREE.AdditiveBlending,
			});
			points = new THREE.Points(pGeo, pMat);
			points.position.set(0, 0.2, -2.2);
			scene.add(points);

			if (canUsePost()) {
				composer = new EffectComposer(renderer);
				composer.addPass(new RenderPass(scene, camera));
				bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 0.85, 0.7, 0.2);
				composer.addPass(bloomPass);
			}

			const resize = () => {
				if (!renderer || !camera) return;
				const w = window.innerWidth;
				const h = Math.max(1, window.innerHeight);
				const nextDpr = Math.min(window.devicePixelRatio || 1, isMobile() ? DPR_CAP_MOBILE : DPR_CAP_DESKTOP);
				renderer.setPixelRatio(nextDpr);
				renderer.setSize(w, h, false);
				camera.aspect = w / h;
				camera.updateProjectionMatrix();
				if (composer) composer.setSize(w, h);
				if (bloomPass) bloomPass.setSize(w, h);
				renderFrame();
			};
			window.addEventListener("resize", resize, { passive: true });

			updateScene();
			body.classList.add("lp-webgl-ready");
			renderFrame();
			startLoop();
		};

		const onScroll = () => {
			if (prefersReducedMotion) return;
			// Compute immediately for snappy chapter switching on fast scroll.
			computeScrollState();
		};
		window.addEventListener("scroll", onScroll, { passive: true });

		// Start with correct state even before first rAF.
		computeScrollState();

		// Pause the loop when tab is hidden.
		document.addEventListener("visibilitychange", () => {
			if (prefersReducedMotion) return;
			if (document.visibilityState === "hidden") stopLoop();
			else startLoop();
		});

		await initThree();
	})();
</script>
</body></html>
